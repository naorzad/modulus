# SPDX-FileCopyrightText: Copyright (c) 2023 - 2024 NVIDIA CORPORATION & AFFILIATES.
# SPDX-FileCopyrightText: All rights reserved.
# SPDX-License-Identifier: Apache-2.0
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

hydra:
  job:
    chdir: true
    name: XAeroNetS
  run:
    dir: ./outputs/${hydra:job.name}

# ┌───────────────────────────────────────────┐
# │            Data Preprocessing             │
# └───────────────────────────────────────────┘  

num_nodes: [200, 400, 800]                  # Number of nodes in the graphs
node_degree: 2                                       # Degree of the nodes in the graphs
num_partitions: 2                                    # Number of partitions for each graph
data_path: /workspace/NACA0012_SurfaceFlow       # Path to the raw data
epsilon: 1e-8
num_preprocess_workers: 8                            # Number of workers for data preprocessing
save_point_clouds: false                             # Save point clouds for the preprocessed data
pressure_min: -2.0
pressure_max: 3.0
friction_min: -0.01
friction_max: 0.01
clip_values_flag: false  # New parameter, defaults to true
partition_graph: false  # Default to partitioning, set to false for single graph

# ┌───────────────────────────────────────────┐
# │           Model Configuration             │
# └───────────────────────────────────────────┘

num_message_passing_layers: 8                       # Number of message passing layers
hidden_dim: 256                                      # Hidden dimension of the model
processor_hidden_dim: 128                                      # Hidden dimension of the model
activation: silu                                     # Activation function

# ┌───────────────────────────────────────────┐
# │          Training Configuration           │
# └───────────────────────────────────────────┘

partitions_path: ${data_path}/train_partitions          # Path to the partitions (.bin files)
validation_partitions_path: ${data_path}/validation_partitions  # Path to the validation partitions (.bin files)
test_partitions_path: ${data_path}/test_partitions  # Path to the validation partitions (.bin files)
stats_file: global_stats.json                       # Path to the global statistics (.json file)
checkpoint_filename: model_checkpoint.pth           # Filename of the model checkpoint
num_epochs: 200                                    # Number of epochs
start_lr: 1e-5                                     # Initial learning rate (cos annealing schedule is used) 
end_lr: 1e-8                                   # Final learning rate (cos annealing schedule is used)                                   
save_checkpoint_freq: 10                             # Frequency of saving the model checkpoint
validation_freq: 100                                 # Frequency of validation

# ┌───────────────────────────────────────────┐
# │        Performance Optimization           │
# └───────────────────────────────────────────┘

use_concat_trick: true                              # Use the concatenation trick
checkpoint_segments: 2                              # Number of segments for the activation checkpointing
enable_cudnn_benchmark: true                        # Enable cudnn benchmark
